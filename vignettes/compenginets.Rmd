---
title: "Introduction to the compenginets package"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to the compenginets package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The goal of *compenginets* is to provide all the time series from  http://www.comp-engine.org/.  
`r NROW(compenginets::meta)` time series are available as of `r Sys.Date()`.  


## Installation

`compenginets` currently isn't on CRAN.  
You can install the **development** version from
[Github](https://github.com/robjhyndman/compenginets)

```r
# install.packages("devtools")
devtools::install_github("robjhyndman/compenginets")
```

## CompEngine: A self-organizing database of time-series data 

[CompEngine](https://www.comp-engine.org/) is an online time-series database which allow users to upload and interactively compare data with similar time series data set. The website was build by [Nick Jones](https://www.imperial.ac.uk/people/nick.jones) and [Ben Fulcher](http://www.benfulcher.com/), based on the early work conducted by Ben D. Fulcher, Max A. Little, and Nick S. Jones (2013). To provide time series similar to the data user uploads, it compute features of the data, and find existing time series matching those features. The features list and detailed description can be found on the [page](https://www.comp-engine.org/#!the-research) of CompEngine.  

## Usage

This package intends to provide means to access data from CompEngine with ease with an `R` solution. To get the data stored in the package, directly calling the name of the data set is feasible (e.g. `cets1`, `cets2`, etc), but not recommended. Instead, function `get_cets` can be used to return time series where key matches some attribute or is a logical vector indicating which rows of meta to return.  
With the default option, `get_cets` returns time series whose category match the keyword or belong to some subcategory under the matched category. 

```{r usage}
library(compenginets)

# Getting series within Finance category (including subcategory)
cets_finance <- get_cets("finance")
str(cets_finance[[1]])

# categories and subcategories

unique(mapply(attr, cets_finance, MoreArgs = list(which = "category")))

```

Associated with each time series, attributes can be viewed individually, or collectively by calling `meta`. `category` attribute of selected time series store subcategories under "Finance" in this case (or "Finance" if there is no subcategories). Information about categories and their subcategories are stored in `cate_path`.

```{r}
head(meta)

str(head(cate_path, 12))
```

Using the option of `get_cets`, searching keyword in attributes other than category can be achieved. Other possible attributes are `timeseries_id`, `timestamp_created`, `source`, `contributor`, `name`, `description`, `sampling_unit`, or `sampling_rate`.

```{r}
# Getting series whose sourse is Macaulay Library
cets_ML <- get_cets("Macaulay Library", category = FALSE)

unique(mapply(attr, cets_ML, MoreArgs = list(which = "source")))
```

`get_cets` can also work with a logical vector indicating which rows of meta to return. 

```{r}
# Extract time series by a random generated logical vector with length equals to the number of series
set.seed(2222)
idx <- sample(c(TRUE, FALSE), NROW(meta), replace = TRUE)
cets_logic <- get_cets(idx)
str(head(cets_logic, 2))
```





## Sources

[B.D. Fulcher, M.A. Little, N.S. Jones. Highly comparative time-series analysis: the empirical structure of time series and their methods. J. Roy. Soc. Interface 10, 20130048, 2013](http://rsif.royalsocietypublishing.org/content/10/83/20130048)  


## License

This package is free and open source software, licensed under CC0
